# 

##

特定の状態の会員 クレカの支払いが失敗したら、リトライ課金
クレカの指定の口座にすでに振り込んでもらっている人がいたら、リトライ課金をやめる。

1. クレカが単純に期限切れている
2. クレカが何らかの理由で止まっている。

リトライ課金はapiから中止できないので、カチカチ押すしかない。

口座振替にしたらええやんというけど、銀行のタイミングのせいでズレる。

クレカの支払いをした後に決済代行会社を見て、そんな会社を見たことないと、
クレカ会社に言って、払い戻しになることがある。
amazonとか、楽天とか、後は有名な会社しか取引した小

さて問題です。先月のリトライと、今月の課金とが同時に来たらお客さんはどう思うでしょう？
クレカの請求が２個来たら、
先月のリトライと、今月の課金を両方失敗したらどうなるでしょう。
リトライ制限があって、３回以上は行われないとか、
ひどい場合は、そもそもリトライが正常に行われない場合もある。
先月のリトライと今月の課金が同時だと正しく動くでしょうか？
先々月のリトライと先月のリトライと今月の課金が同時に来たら動くのだろうか？

リトライ課金の後に課金日を変えたらどう動くのか？

失敗しました課金を停止した後に再開した時に、停止と再開の課金日を課金を再開したらどのように動くか？
リトライ課金と、課金日

仕様書？あるわけないじゃないですか。
最初に戻るわけですが、なぜapiや仕様を後悔しないのか？
支払いサイトや料金のことがメインで、技術的な仕様書かれていないですよね？
誰宛の文章かと言うと経営者向けの文章で、そいつら納得させたらいいんですよ？




これちゃんとSQL書ける人でないと設計難しいんですよ。
できてるわけないじゃないですか。

これをちゃんと把握するために、apiなり、何なりを実行した時に会社側か、

おじいちゃんやおばあちゃんもいる。

翌月のリトライと、本来の請求がくると、お客さんは２十に請求されたと勘違いする。
言っちゃ悪いけど、クレカの支払い止められている人とか、自分で決済
社会人の割に頭悪い人や信用が無い人が多くて、クレーマー気質だったり、要領を得ない答えや
長電話してくる人が多くて、


お客さんにできるかどうかわからない選択肢を与えると、
コールセンターが潰れる。エンジニアは
特に大企業なら、クレーマー対応係は有休簡単に取れるようにしてるとか
精神科行っても理解あったりとかあるけど、
ベンチャーはそこまで経営者も理解してない人が多い。
コールセンターが

やめない人は能力高いとか、鈍感力があるというより、ここで仕事もらえなかったら、
他がない人だった。

これ、プログラミング難しいの分かりますか？
日付計算とか、

日本人決済代行会社の名前、経営者でもマジで知らないから。
私たちなら、会社ググって調べて、
50以上とか知らん方
PayPalでも知らんからね。

なんでそんな面倒くさいと思うかもだけど、クレカ＋決済代行を使うなら理解しとくべきリスクです。
クレカで失敗したらどうやって回収するか？

口座振替が失敗した人も、

クレカで再決済
Virtual口座を使うと良い。

クレカで決済失敗した人が、クレカ使えない可能性があって、
決済失敗したか、取り消した人ヒアリングする必要があるから


会社の銀行口座を調べて、そこに直接振り込むとか、


意識することは
冪等性を保証すべき。


